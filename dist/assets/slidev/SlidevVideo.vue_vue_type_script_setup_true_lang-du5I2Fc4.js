import{d as _,z as s,r as f,L as P,aC as S,E as h,f as g,o as B,j as M}from"../modules/vue-DlVVBUfI.js";import{a as x,ai as L}from"../index-DBjX0mtE.js";import{u as $}from"./context-DIK7n8Qa.js";const w=["poster","controls"],R=_({__name:"SlidevVideo",props:{autoplay:{type:[Boolean,String]},autoreset:{},poster:{},printPoster:{},timestamp:{},printTimestamp:{},controls:{type:Boolean}},setup(y){const e=y,l=s(()=>e.printPoster??e.poster),i=s(()=>e.printTimestamp??e.timestamp??0),{$slidev:r,$renderContext:k,$route:u}=$(),{isPrintMode:C}=x(),n=s(()=>C.value||!["slide","presenter"].includes(k.value)),o=f(),p=f(!1);P(()=>{if(n.value)return;const a=+(e.timestamp??0);o.value.currentTime=a;const t=s(()=>!!u&&u.no===(r==null?void 0:r.nav.currentSlideNo)),c=s(()=>{var d,v;return!!o.value&&(((v=(d=L.get(o.value))==null?void 0:d.isShown)==null?void 0:v.value)??!0)}),m=S(t,c);h(m,()=>{m.value?(e.autoplay===!0||e.autoplay==="once"&&!p.value)&&o.value.play():(o.value.pause(),(e.autoreset==="click"||e.autoreset==="slide"&&!t.value)&&(o.value.currentTime=a))},{immediate:!0})});function T(a){const t=a.target;n.value&&(!l.value||e.printTimestamp)&&(t.currentTime=i.value==="last"?t.duration:+i.value)}return(a,t)=>(B(),g("video",{ref_key:"video",ref:o,poster:n.value?l.value:e.poster,controls:!n.value&&e.controls,onPlay:t[0]||(t[0]=c=>p.value=!0),onLoadedmetadata:T},[M(a.$slots,"default")],40,w))}});export{R as _};
